import{c as y,e as L,t as b,i as n,j as i,y as z,S as g,n as _,q as F,F as w,x as I,v as k}from"./framework-CVMD37SS.js";import{a5 as E,a8 as M,ae as O,af as R,ag as T}from"./vendor-DGVArQ4Y.js";var j=b('<div class="text-xs text-secondary/50 text-center py-4">Collecting metrics... (Interact with page)'),D=b('<div class="fixed bottom-4 right-4 z-50 w-80 bg-background border border-foreground/20 shadow-xl rounded-md flex flex-col overflow-hidden animate-in slide-in-from-bottom-4"><div class="flex items-center justify-between p-3 bg-base-200 border-b border-foreground/10"><h3 class="font-bold text-sm flex items-center gap-2"> Performance</h3><button class="hover:bg-foreground/10 rounded-sm p-1"></button></div><div class="p-4 space-y-4 max-h-96 overflow-y-auto"><div class="grid grid-cols-1 gap-2"></div><div class=space-y-1><h4 class="text-[10px] uppercase font-bold text-secondary/50 tracking-wider">Slowest Resources'),N=b('<div class="flex items-center justify-between p-2 bg-base-100 rounded border border-base-300"><div class="flex items-center gap-2"><span class="text-xs font-bold"></span></div><div>'),q=b('<div class="flex justify-between text-xs font-mono"><span class="truncate max-w-[180px]"></span><span class=text-secondary/70>ms');const G=$=>{const[x,C]=y([]),[S,P]=y([]),h=(r,e)=>r==="LCP"?e<=2500?"good":e<=4e3?"needs-improvement":"poor":r==="FID"?e<=100?"good":e<=300?"needs-improvement":"poor":r==="CLS"?e<=.1?"good":e<=.25?"needs-improvement":"poor":r==="INP"?e<=200?"good":e<=500?"needs-improvement":"poor":"good";L(()=>{try{const e=new PerformanceObserver(l=>{for(const t of l.getEntries())t.entryType==="largest-contentful-paint"?m("LCP",t.startTime,"ms"):t.entryType==="layout-shift"&&!t.hadRecentInput?m("CLS",t.value,""):t.entryType==="first-input"&&m("FID",t.processingStart-t.startTime,"ms")});e.observe({type:"largest-contentful-paint",buffered:!0}),e.observe({type:"layout-shift",buffered:!0}),e.observe({type:"first-input",buffered:!0})}catch{console.warn("PerformanceObserver not supported")}new PerformanceObserver(e=>{const l=e.getEntries().map(t=>({name:t.name.split("/").pop()||t.name,duration:t.duration})).sort((t,a)=>a.duration-t.duration).slice(0,10);P(l)}).observe({type:"resource",buffered:!0})});const m=(r,e,l)=>{C(t=>{const a=t.findIndex(o=>o.name===r),p=h(r,e);if(a>=0){const o=[...t];return r==="CLS"?o[a].value+=e:o[a].value=e,o[a].rating=h(r,o[a].value),o}return[...t,{name:r,value:e,unit:l,rating:p}]})};return(()=>{var r=D(),e=r.firstChild,l=e.firstChild,t=l.firstChild,a=l.nextSibling,p=e.nextSibling,o=p.firstChild,v=o.nextSibling;return v.firstChild,n(l,i(E,{size:16,class:"text-accent"}),t),z(a,"click",$.onClose,!0),n(a,i(M,{size:14})),n(p,i(g,{get when(){return x().length===0},get children(){return j()}}),o),n(o,i(w,{get each(){return x()},children:s=>(()=>{var f=N(),d=f.firstChild,c=d.firstChild,u=d.nextSibling;return n(d,i(g,{get when(){return s.name==="LCP"},get children(){return i(O,{size:14})}}),c),n(d,i(g,{get when(){return s.name==="CLS"},get children(){return i(R,{size:14})}}),c),n(d,i(g,{get when(){return s.name==="FID"},get children(){return i(T,{size:14})}}),c),n(c,()=>s.name),n(u,()=>s.value.toFixed(2),null),n(u,()=>s.unit,null),_(()=>F(u,`text-xs font-mono font-bold px-2 py-0.5 rounded ${s.rating==="good"?"bg-green-500/20 text-green-600":s.rating==="needs-improvement"?"bg-yellow-500/20 text-yellow-600":"bg-red-500/20 text-red-600"}`)),f})()})),n(v,i(w,{get each(){return S()},children:s=>(()=>{var f=q(),d=f.firstChild,c=d.nextSibling,u=c.firstChild;return n(d,()=>s.name),n(c,()=>s.duration.toFixed(0),u),_(()=>I(d,"title",s.name)),f})()}),null),r})()};k(["click"]);export{G as default};
